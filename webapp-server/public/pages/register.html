
<div class="modal-dialog" ng-controller="RegisterCtrl">
  <!-- the scope of "RegisterCtrl" should be a child of the scope of "MainCtrl" -->
  <div>
    <div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeRegisterModal()">&times;</button>
  <!-- method "closeRegisterModal()" inheritated from its parent scope -->

	<h4 class="modal-title">Sign Up</h4>
    </div>			<!-- /modal-header -->
    <form id="registerForm" name="registerForm" role="form" ng-submit="register()" autocomplete="off">
    <div class="modal-body">
      <div class="form-group">
	  <label for="username">Username: </label>
	  <input type="username" class="form-control" id="phone" ng-model="username" ng-blur="checkUsername()" placeholder="Email or mobile number" required/>
      </div>
      <div class="form-group" ng-class="{'has-success has-feedback': password_valid && registerForm.pwd.$touched && registerForm.pwd.$dirty, 'has-error has-feedback': !password_valid && registerForm.pwd.$touched && registerForm.pwd.$dirty}">
        <label for="pwd">Password: </label>
	<input type="password" class="form-control" id="pwd" name="pwd" ng-model="password" ng-blur="checkPassword()" ng-change="logi()" placeholder="Enter password (6-15 characters)" required>
	<span class="form-control-feedback" ng-class="{'glyphicon glyphicon-ok': password_valid, 'glyphicon glyphicon-remove': !password_valid}" ng-show="registerForm.pwd.$touched && registerForm.pwd.$dirty"></span>
	<span class="help-block" ng-show="!password_valid && (registerForm.pwd.$touched && registerForm.pwd.$dirty)">Your password should consist of 6-15 characters</span>
      </div>
  <div class="form-group" ng-class="{'has-success has-feedback': re_password_valid && registerForm.re_pwd.$touched && registerForm.pwd.$dirty && registerForm.re_pwd.$dirty, 'has-error has-feedback': !re_password_valid && (registerForm.re_pwd.$touched && registerForm.re_pwd.$dirty && registerForm.pwd.$dirty)}">
        <label for="re_pwd">Retype Password: </label>
	<input type="password" class="form-control" id="re_pwd" name="re_pwd" ng-model="re_password" ng-blur="checkPassword()" placeholder="Retype your password" ng-change="onChangeRePwd()" required/>
	<span class="form-control-feedback" ng-class="{'glyphicon glyphicon-ok': re_password_valid, 'glyphicon glyphicon-remove': !re_password_valid}" ng-show="registerForm.re_pwd.$touched && registerForm.re_pwd.$dirty && registerForm.pwd.$dirty"></span>
      </div>
      <label class="radio-inline">
        <input type="radio" name="sex" value="0" ng-model="sex"/>Male
      </label>
      <label class="radio-inline">
        <input type="radio" name="sex" value="1" ng-model="sex"/>Female
      </label>
    </div>			<!-- /modal-body -->
    <div class="modal-footer">
	<button class="btn btn-sm btn-primary" type="submit">Register</button>
	<a class="btn btn-sm btn-default" ng-click="closeRegisterModal()">Close</button>
    </div>			<!-- /modal-footer -->
    </form>
  </div>
</div>
